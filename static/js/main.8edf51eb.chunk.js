(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{144:function(e,t,a){e.exports=a(322)},149:function(e,t,a){},160:function(e,t,a){},322:function(e,t,a){"use strict";a.r(t);var n,s=a(0),c=a.n(s),o=a(8),r=a.n(o),i=(a(149),a(95)),d=a(121),l=a(122),m=a(36),p=a(140),u=a(141),h=a(25),v=a.n(h),E=a(327),b=a(325),f=a(324),g=a(326),w=a(329),R=a(328),k=a(94),S=(a(160),E.a.TabPane);window.addEventListener("deviceorientation",(function(e){var t=e.alpha,a=e.beta,s=e.gamma;n={alpha:t,beta:a,gamma:s}}));var y={labelCol:{span:4},wrapperCol:{span:16}},x={wrapperCol:{offset:4,span:16}},C=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).deviceorientation=function(){var e=Object(m.a)(s),t=(e.changeSpeed,e.changeDirection),a=e.state,c=(a.hold,a.base),o=(c.gamma,c.beta),r=a.directionReverse,i=(a.speedZeroRate,a.speedMaxRate,a.speedReverseMaxRate,n.beta-o);i=(i=i<-30?-30:i)>30?30:i,t(5*(r?-i/30:i/30)+7.5)},s.keyboardBind=function(){var e=Object(m.a)(s),t=e.changeDirection,a=e.changeSpeed;document.addEventListener("keydown",(function(e){var n=Object(m.a)(s).state,c=n.wsConnected,o=n.speedMaxRate,r=n.speedReverseMaxRate;if(c){var i=e.key;"w"===i&&a(o),"s"===i&&a(r),"a"===i&&t(12.5),"d"===i&&t(2.5)}}),!1),document.addEventListener("keyup",(function(e){var n=Object(m.a)(s).state,c=n.wsConnected,o=n.speedZeroRate;if(c){var r=e.key;"w"===r&&a(o),"s"===r&&a(o),"a"===r&&t(7.5),"d"===r&&t(7.5)}}),!1)},s.connectWs=function(e){var t=e.wsAddress;s.socket&&(s.socket.close(),s.socket=void 0),s.socket=window.io(t),s.socket.on("connect",(function(){s.setState({wsConnected:!0}),s.changeZeroSpeedRate(s.state.speedZeroRate),v.a.set("wsAddress",t)})),s.socket.on("disconnect",(function(){s.setState({wsConnected:!1})}))},s.disconnectWs=function(e){e&&e.preventDefault(),s.socket.close()},s.handleHold=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||(s.socket.emit("speed rate",0),s.socket.emit("direction rate",0)),s.setState({hold:e,base:Object(i.a)({},n)})},s.changeZeroSpeedRate=function(e){s.state.wsConnected&&(s.socket.emit("speed zero rate",e),s.setState({speedZeroRate:e}))},s.changeSpeed=function(e){s.state.wsConnected&&(s.socket.emit("speed rate",e),s.setState({speedRate:e}))},s.changeDirection=function(e){s.state.wsConnected&&(s.socket.emit("direction rate",e),s.setState({direction:e}))},s.appRef=c.a.createRef(),s.state={hold:!1,speed:0,direction:0,base:{alpha:void 0,beta:void 0,gamma:void 0},speedMaxRate:v.a.get("speedMaxRate")||80,speedReverseMaxRate:v.a.get("speedReverseMaxRate")||70,speedZeroRate:v.a.get("speedZeroRate")||75,speedRate:0,directionReverse:v.a.get("directionReverse")||!0,wsConnected:!1,wsAddress:v.a.get("wsAddress")},s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.deviceorientation,t=this.keyboardBind,a=this.connectWs,n=this.state.wsAddress;window.addEventListener("deviceorientation",(function(t){e()}),!1),t(),a({wsAddress:n})}},{key:"render",value:function(){var e=this,t=this.connectWs,a=this.disconnectWs,s=this.changeSpeed,o=this.changeDirection,r=this.state,d=r.wsConnected,l=r.hold,m=r.directionReverse,p=r.direction,u=r.speedReverseMaxRate,h=r.speedMaxRate,C=r.speedZeroRate,M=r.speedRate,I=r.wsAddress;return c.a.createElement("div",{className:"App",ref:this.appRef},c.a.createElement(b.a,{layout:"inline",className:"status"},c.a.createElement(b.a.Item,{label:"\u8fde\u63a5\u72b6\u6001"},c.a.createElement(f.a,{checked:d,disabled:!0})),c.a.createElement(b.a.Item,{label:"\u5168\u5c4f"},c.a.createElement(f.a,{onChange:function(t){t?e.appRef.current.requestFullscreen():window.document.exitFullscreen()}})),c.a.createElement(b.a.Item,{label:"\u65b9\u5411\u611f\u5e94\u63a7\u5236"},c.a.createElement(f.a,{checked:l,disabled:!0})),c.a.createElement(b.a.Item,{label:"\u8235\u673a"},c.a.createElement(g.a,{value:p,min:0,max:100,onChange:o,style:{width:"10vw"}})),c.a.createElement(b.a.Item,{label:"\u8235\u673a PWM"},c.a.createElement(w.a,{min:0,max:20,style:{margin:"0 16px"},value:p,onChange:o})),c.a.createElement(b.a.Item,{label:"\u7535\u8c03"},c.a.createElement(g.a,{value:M,min:0,max:100,onChange:s,style:{width:"10vw"}})),c.a.createElement(b.a.Item,{label:"\u7535\u8c03 PWM"},c.a.createElement(w.a,{min:0,max:100,style:{margin:"0 16px"},value:M,onChange:s}))),c.a.createElement(E.a,{tabPosition:"left"},c.a.createElement(S,{tab:"\u8fde\u63a5",key:1},c.a.createElement(b.a,Object.assign({},y,{onFinish:t,initialValues:{wsAddress:I}}),c.a.createElement("br",null),c.a.createElement(b.a.Item,{label:"\u8fde\u63a5\u5730\u5740",name:"wsAddress",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8fde\u63a5\u5730\u5740!"}]},c.a.createElement(R.a,null)),c.a.createElement(b.a.Item,{label:"\u7535\u8c03 0 \u529f\u7387 PWM \u7a7a\u5360\u6bd4"},c.a.createElement(w.a,{value:C,min:0,max:100,onChange:function(t){e.changeZeroSpeedRate(t),v.a.set("speedZeroRate",t)}})),c.a.createElement(b.a.Item,{label:"\u7535\u8c03\u8f93\u51fa\u6700\u5927\u529f\u7387 PWM \u7a7a\u5360\u6bd4"},c.a.createElement(w.a,{value:h,min:0,max:100,onChange:function(t){e.setState({speedMaxRate:t}),v.a.set("speedMaxRate",t)}})),c.a.createElement(b.a.Item,{label:"\u7535\u8c03\u53cd\u5411\u8f93\u51fa\u6700\u5927\u529f\u7387 PWM \u7a7a\u5360\u6bd4"},c.a.createElement(w.a,{value:u,min:0,max:100,onChange:function(t){e.setState({speedReverseMaxRate:t}),v.a.set("speedReverseMaxRate",t)}})),c.a.createElement(b.a.Item,x,d?c.a.createElement(k.a,{type:"danger",onClick:a},"\u65ad\u5f00"):c.a.createElement(k.a,{type:"primary",htmlType:"submit"},"\u8fde\u63a5")))),c.a.createElement(S,{tab:"\u952e\u76d8\u63a7\u5236",key:2},c.a.createElement(b.a,y)),c.a.createElement(S,{tab:"\u65b9\u5411\u611f\u5e94\u63a7\u5236",key:3},c.a.createElement(b.a,y,c.a.createElement(b.a.Item,{label:"\u8235\u673a\u53cd\u5411"},c.a.createElement(f.a,{checked:m,onChange:function(t){e.setState({directionReverse:t})}})),c.a.createElement(b.a.Item,x,c.a.createElement(k.a,{type:"danger",onClick:function(){e.setState({base:Object(i.a)({},n)})}},"\u5f52\u96f6\u6821\u51c6")),c.a.createElement(k.a,{className:"forward-button",shape:"circle",size:"large",type:"primary",onTouchStart:function(){e.setState({hold:!0}),e.changeSpeed(h)},onTouchEnd:function(){e.setState({hold:!1}),e.changeSpeed(C)}},"\u524d\u8fdb"),c.a.createElement(k.a,{className:"backward-button",shape:"circle",size:"large",type:"primary",onTouchStart:function(){e.setState({hold:!0}),e.changeSpeed(u)},onTouchEnd:function(){e.setState({hold:!1}),e.changeSpeed(C)}},"\u540e\u9000")))))}}]),a}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[144,1,2]]]);
//# sourceMappingURL=main.8edf51eb.chunk.js.map